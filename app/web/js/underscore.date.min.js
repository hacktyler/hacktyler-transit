(function(a){function t(a,b){function i(a,b){switch(a){case"M":case"MM":c[1]=~~b-1;break;case"D":case"DD":case"DDD":case"DDDD":c[2]=~~b;break;case"YY":b=~~b,c[0]=b+(b>70?1900:2e3);break;case"YYYY":c[0]=~~b;break;case"a":case"A":h=b.toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":c[3]=~~b;break;case"m":case"mm":c[4]=~~b;break;case"s":case"ss":c[5]=~~b}}var c=[0],d=/[0-9a-zA-Z]+/g,e=[],f=[],g,h;a.replace(d,function(a){e.push(a)}),b.replace(d,function(a){f.push(a)});for(g=0;g<f.length;g++)i(f[g],e[g]);h&&c[3]<12&&(c[3]+=12);return new s(c)}function s(a){this.date=n(a);return this}function r(a){var b=Math.abs(a)/1e3,c=b/60,d=c/60,e=d/24,f=e/365;return b<45&&p("s",~~b)||b<90&&p("m")||c<45&&p("mm",~~c)||c<90&&p("h")||d<24&&p("hh",~~d)||d<48&&p("d")||e<25&&p("dd",~~e)||e<45&&p("M")||e<350&&p("MM",~~((e+15)/30))||f<2&&p("y")||p("yy",~~f)}function q(a,b){return o(a)-o(b)}function p(a,b){return h[a].replace(/%d/i,b||1)}function o(a){return isNaN(a)?n(a).getTime():a}function n(b){return b===a?new Date:b.date instanceof Date?b.date:b instanceof Date?b:m(b)?l(b):new Date(b)}function m(a){return Object.prototype.toString.call(a)==="[object Array]"}function l(a){return new Date(a[0],a[1]||0,a[2]||1,a[3]||0,a[4]||0,a[5]||0,a[6]||0)}function k(a,b,c){var d=a.date,e=(b.ms||0)+(b.s||0)*1e3+(b.m||0)*6e4+(b.h||0)*36e5+(b.d||0)*864e5+(b.w||0)*6048e5,f=(b.M||0)+(b.y||0)*12,g;e&&d.setMilliseconds(d.getMilliseconds()+e*c),f&&(g=d.getDate(),d.setDate(1),d.setMonth(d.getMonth()+f*c),d.setDate(Math.min((new Date(d.getFullYear(),d.getMonth()+1,0)).getDate(),g)));return a}function j(a,b){var c=a+"";while(c.length<b)c="0"+c;return c}var b=this,c,d=["January","February","March","April","May","June","July","August","September","October","November","December"],e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h={future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},i=function(a){var b=a%10;return~~(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"};s.prototype={format:function(a){function s(a){var b,q;switch(a){case"M":return c+1;case"Mo":return c+1+i(c+1);case"MM":return j(c+1,2);case"MMM":return e[c];case"MMMM":return d[c];case"D":return h;case"Do":return h+i(h);case"DD":return j(h,2);case"DDD":b=new Date(k,c,h),q=new Date(k,0,1);return~~((b-q)/864e5+1.5);case"DDDo":b=s("DDD");return b+i(b);case"DDDD":return j(s("DDD"),3);case"d":return l;case"do":return l+i(l);case"ddd":return g[l];case"dddd":return f[l];case"w":b=new Date(k,c,h-l+5),q=new Date(b.getFullYear(),0,4);return~~((b-q)/864e5/7+1.5);case"wo":b=s("w");return b+i(b);case"ww":return j(s("w"),2);case"YY":return(k+"").slice(-2);case"YYYY":return k;case"a":return m>11?"pm":"am";case"A":return m>11?"PM":"AM";case"H":return m;case"HH":return j(m,2);case"h":return m%12||12;case"hh":return j(m%12||12,2);case"m":return n;case"mm":return j(n,2);case"s":return o;case"ss":return j(o,2);case"z":return s("zz").replace(r,"");case"zz":b=p.indexOf("(");if(b>-1)return p.slice(b+1,p.indexOf(")"));return p.slice(p.indexOf(":")).replace(r,"");default:return a.replace("\\","")}}var b=this.date,c=b.getMonth(),h=b.getDate(),k=b.getFullYear(),l=b.getDay(),m=b.getHours(),n=b.getMinutes(),o=b.getSeconds(),p=b.toString(),q=/(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?)/g,r=/[^A-Z]/g;return a.replace(q,s)},add:function(a){return k(this,a,1)},subtract:function(a){return k(this,a,-1)},customize:function(a){var b=a.ordinal,c=a.relativeTime,j;a.weekdays&&(f=a.weekdays),a.weekdaysShort&&(g=a.weekdaysShort),a.months&&(d=a.months),a.monthsShort&&(e=a.monthsShort);if(c)for(j in c)c.hasOwnProperty(j)&&(h[j]=c[j]);b&&b instanceof Function&&(i=b)},from:function(a,b,c){var d=q(this.date,a),e=d<0?h.past:h.future;return c?d:b?r(d):e.replace(/%s/i,r(d))},fromNow:function(a,b){return this.from(c.now(),a,b)},isLeapYear:function(){return c.isLeapYear(this.date.getFullYear())}},c={date:function(a,b){return b?t(a,b):new s(a)},now:function(a){return a?(new Date).getTime():c.date()},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0}},typeof window=="undefined"&&typeof module!="undefined"?module.exports=c:b._!==a?b._.mixin(c):b._date=c})()